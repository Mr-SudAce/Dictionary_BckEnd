{% extends "admin/supermain.html" %}
{% load static %}
{% block admin %}

<link rel="stylesheet" href="{% static 'css/header.css' %}">



<div>
  {% if messages %}
  <div class="alert-position">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible-custom fade show shadow-sm alert-custom" role="alert">
      {{ message }}
      <button type="button" class="btn-close btn-close-custom" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <h1 class="page-header">Header Management</h1>

  <div class="table-card">
    <div class="table-responsive table-responsive-custom">
      <table class="table table-bordered table-striped table-hover align-middle table-custom">
        <thead class="bg-light">
          <tr class="bg-dark text-white">
            <th class="text-center align-middle" style="width: 10%">#</th>
            <th class="text-center align-middle">Site Name</th>
            <th class="text-center align-middle">Logo</th>
            <th class="text-center align-middle" style="width: 20%">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% if ApiHeaderList %}
          {% for header in ApiHeaderList %}
          <tr>
            <td class="text-center fw-bolder">{{ forloop.counter }}</td>
            <td class="text-center align-middle">{{ header.site_title }}</td>
            <td class="text-center">
              {% if header.logo %}
              <img src="{{ header.logo }}" alt="{{ header.site_title}}" class="rounded shadow-sm" />
              {% else %}
              <img src="{% static 'default.jpg' %}" alt="No Logo" class="rounded shadow-sm" />
              {% endif %}
            </td>
            <td class="text-center">
              <div class="btn-group gap-2 btn-group-custom">
                <a href="{% url 'updateheader' header.id %}" class="btn btn-sm btn-outline-warning" title="Edit Header" data-bs-toggle="modal" data-bs-target="#headerFormModal{{ header.id }}">
                  <i class="bi bi-pencil-square"></i>
                </a>
              </div>
            </td>
          </tr>
          {% endfor %}
          {% else %}
          <tr>
            <td colspan="4" class="text-center text-muted py-4">No headers available.</td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  {% for header in ApiHeaderList %}
  <div class="modal fade" id="headerFormModal{{ header.id }}" tabindex="-1" aria-labelledby="headerFormModalLabel{{ header.id }}" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header modal-header-custom">
          <h5 class="modal-title" id="headerFormModalLabel{{ header.id }}">
            {% if header.id %} Update Header {% else %} Add New Header {% endif %}
          </h5>
          <button type="button" class="btn-close btn-close-custom" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="{% if header.id %}{% url 'updateheader' header.id %}{% else %}{% url 'apiheader' %}{% endif %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row g-3">
              {% for field in headerform %}
              <div class="col-12">
                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                {{ field }}
              </div>
              {% endfor %}
            </div>
            <div class="d-flex justify-content-end form-submit-btn">
              <button type="submit" class="btn btn-success">Submit <i class="bi bi-check-circle"></i></button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}
